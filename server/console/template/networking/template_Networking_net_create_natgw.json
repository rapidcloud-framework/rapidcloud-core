{
  "type": "Theia::Action",
  "label": "NAT Gateways",
  "id": "net_create_natgw",
  "steps": [
    {
      "type": "Theia::Step::Grid",
      "id": "net_create_natgw",
      "datasource": "data?type=metadata&filter_name=module,command&filter_value=net,create_natgw",
      "env_param_required": true,
      "columns": [
        "name",
        "subnet_module_id",
        "route_tables",
        "timestamp"
      ],
      "title": "NAT Gateways",
      "description": "Create a NAT Gateway and update routes for internet access, over NAT.\nIt is recommended to create one NAT Gateway per AZ if you are running production workloads.\nAn EIP will be allocated for this Gateway as well.",
      "submit": "Continue"
    },
    {
      "type": "Theia::Step::Form",
      "id": "net_create_natgw",
      "title": "",
      "description": "",
      "submit": "Submit",
      "not_editable": true,
      "commands": [
        {
          "label": "Create",
          "command": {
            "phase": "net",
            "command": "create_natgw",
            "refresh_status": true
          }
        }
      ],
      "controls": [
        {
          "type": "Theia::Control::Input",
          "id": "name",
          "cli_id": "name",
          "label": "Name",
          "help": "The NAT Gateway name",
          "inputType": "text",
          "validations": [
            {
              "type": "Theia::Validation::Required",
              "message": "Name is required"
            }
          ]
        },
        {
          "type": "Theia::Control::Select",
          "id": "subnet_module_id",
          "label": "Subnet",
          "help": "Select a Subnet with an Internet Gateway route to create this NAT Gateway in.",
          "datasource": "custom/module_net_subnets?extra=true&module_name_arg=net"
        },
        {
          "type": "Theia::Control::MultiSelect",
          "id": "route_tables",
          "label": "Add Route to Route Tables",
          "help": "Select the Route Tables that will be updated to provide internet access through this NAT Gateway",
          "datasource": "custom/module_net_route_tables?extra=true&module_name_arg=net"
        }
      ]
    }
  ]
}