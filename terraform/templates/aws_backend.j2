provider "aws" {
  region = "{{ region }}"
}

# backend config
terraform {
  required_version = "=1.3.4"
    required_providers {
      aws = {
        version = "<= 4.59.0"
          source = "hashicorp/aws"
      }
      conformity = {
        version = "~> 0.5.0"
          source  = "trendmicro/conformity"
      }
      kubernetes = {
        source = "hashicorp/kubernetes"
          version = "2.20.0"
      }
      helm = {
        source = "hashicorp/helm"
          version = "2.9.0"
      }
    }
  backend "s3" {
    bucket         = "{{ state_bucket }}"
      key            = "{{ name }}/terraform.tfstate"
      region         = "{{ region }}"
      dynamodb_table = "{{ state_lock_table }}"
  }
}
